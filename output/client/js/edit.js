!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){!function(){var e=window.settingData||{};e.pointer=e.pointer||"15.png";var t=function(){this.init()};t.prototype={init:function(){this.pageController=!1,this.rTab=new RTab,this.dueDialog(),this.duePage(),this.dueBgUpload(),this.dueText(),this.dueImage(),this.duePreview(),this.dueHeadButton(),this.changeTab(),window.update=this.update,window.updateTextColor=this.updateTextColor},dueBgUpload:function(){var e=this,t=new ZUpload({dropArea:"#upload-area",fileHandler:"#bgChange",success:function(t){var n=e.pageController.getCurrentPage().stageId;$("#"+n).css({"background-image":"url("+t.data.filePath+")"})},error:function(e){console.log(e)}});$("#bgDelete").on("click",function(){t.clear();var n=e.pageController.getCurrentPage().stageId;$("#"+n).css({"background-image":"none"})})},duePage:function(){this.pageController=new PageController({rTab:this.rTab}),$("#page1").trigger("click")},dueText:function(){new Text({pageController:this.pageController,rTab:this.rTab})},dueImage:function(){new ImageItem({pageController:this.pageController,rTab:this.rTab})},duePreview:function(){var t=this;$("#preview").on("click",function(){t.pageController.saveCurrentPage(),t.pageController.saveCurrentItem();var n=t.rTab.buildData();n.pointer=e.pointer,$.post("/build",{config:JSON.stringify(n)},function(e){var t=JSON.parse(e),n=$(".simulator-box").length,o="show-h5.html?src="+t.data.viewPath+"&pages="+n;window.open(o,"newwindow")})})},update:function(e){$(".simulator-box.active").css("background-color","#"+e)},updateTextColor:function(e){$(".resize-item.item-show").css("color","#"+e)},save:function(t){this.pageController.saveCurrentPage(),this.pageController.saveCurrentItem();var n=this.rTab.buildData();n.author=e.author,n.name=e.name,n.discript=e.discript,n.cover=e.cover,n._id=e.id,n.pointer=e.pointer,$.post("/save",{config:JSON.stringify(n)},function(n){var o=JSON.parse(n);"000000"!==o.code?alert(o.msg):(e.id=o.data.id,t?t():alert("保存成功"))})},dueDialog:function(){window.isEdit?($("#author").val(e.author),$("#projectName").val(e.name),$("#projectDiscript").val(e.discript),this.rTab.setPreview($("#uploadCover"),e.cover)):$("#pageInfoDialog").show(),new ZUpload({dropArea:"#uploadCover",success:function(t){e.cover=t.data.filePath},error:function(e){console.log(e)}}),$("#sure").bind("click",function(){var t=$("#author").val();if(t){var n=$("#projectName").val();if(n){var o=$("#projectDiscript").val();console.log(o),e.cover?(e.author=t,e.name=n,e.discript=o,$("#pageInfoDialog").hide()):alert("请上传封面")}else alert("标题必填")}else alert("作者必填")}),$("#cancel").bind("click",function(){e.name&&e.author?$("#pageInfoDialog").hide():location.href="home"}),$(".icon-handler").each(function(t){$(this).bind("click",function(){7===t?$(".icon-stage").css({background:"#dbdbdb"}):$(".icon-stage").css({background:"#e6e6e6"}),$("#pointerImg").attr("src","client/images/pointer/"+(t+1)+".png"),e.pointer=t+1+".png"})})},dueHeadButton:function(){var t=this;$("#save").bind("click",function(){t.save()}),$("#setting").bind("click",function(){$("#pageInfoDialog").show()}),$("#download").bind("click",function(){e.id?t.download():t.save(function(){t.download()})})},changeTab:function(){new changeTabs},download:function(){location.href="/download?id="+e.id}},new t}()}]);
//# sourceMappingURL=debugging/edit.js.map